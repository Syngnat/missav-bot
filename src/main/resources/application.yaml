server:
  port: 8000

spring:
  application:
    name: missav-bot

  servlet:
    multipart:
      enabled: false  # 禁用文件上传解析，Bot 不需要此功能

  sql:
    init:
      mode: never

  datasource:
    url: jdbc:mysql://${DB_HOST:localhost}:3308/missav_bot?useSSL=false&serverTimezone=Asia/Shanghai&useUnicode=true&characterEncoding=UTF-8&allowPublicKeyRetrieval=true
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:your_password}

mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
    # 生产环境关闭 SQL 日志，开发时可以打开
    # log-impl: org.apache.ibatis.logging.slf4j.Slf4jImpl
  global-config:
    db-config:
      id-type: auto
      logic-delete-value: 1
      logic-not-delete-value: 0

telegram:
  bot:
    token: ${BOT_TOKEN:YOUR_BOT_TOKEN}
    username: ${BOT_USERNAME:YOUR_BOT_USERNAME}
    default-chat-id: ${BOT_CHAT_ID:0}
  proxy:
    enabled: ${TELEGRAM_PROXY_ENABLED:false}  # 默认关闭，开发环境可设置为 true
    host: ${TELEGRAM_PROXY_HOST:127.0.0.1}
    port: ${TELEGRAM_PROXY_PORT:7890}

crawler:
  enabled: ${CRAWLER_ENABLED:true}
  interval: ${CRAWLER_INTERVAL:900000}  # 爬取间隔（毫秒），默认15分钟
  initial-pages: ${CRAWLER_INITIAL_PAGES:2}  # 首次启动爬取页数
  cleanup-cron: ${CRAWLER_CLEANUP_CRON:0 0 3 * * ?}  # 清理任务 cron 表达式，默认每天凌晨3点
  user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36

logging:
  level:
    root: ${LOG_LEVEL_ROOT:INFO}
    com.missav.bot: ${LOG_LEVEL_APP:INFO}
    com.missav.bot.crawler: ${LOG_LEVEL_CRAWLER:INFO}
    com.missav.bot.push: ${LOG_LEVEL_PUSH:INFO}
    com.missav.bot.scheduler: ${LOG_LEVEL_SCHEDULER:INFO}
    org.telegram: ${LOG_LEVEL_TELEGRAM:WARN}
    com.zaxxer.hikari: ${LOG_LEVEL_HIKARI:WARN}
    org.springframework: ${LOG_LEVEL_SPRING:WARN}
    # SQL 日志（mapper 级别）
    com.missav.bot.video.mapper: ${LOG_LEVEL_SQL:INFO}
    com.missav.bot.push.mapper: ${LOG_LEVEL_SQL:INFO}
    com.missav.bot.subscription.mapper: ${LOG_LEVEL_SQL:INFO}
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
  file:
    name: logs/missav-bot.log

management:
  endpoints:
    web:
      exposure:
        include: health
  endpoint:
    health:
      show-details: when-authorized
